<nav class="navbar navbar-expand navbar-dark" role="navigation">
  {ignore}
    Fill the variables with an invisible 'truthy/falsey' value, to be able to use it later as a boolean:
  {/ignore}
  {$doAdd=($_GET['do'] === 'addlink') ? ' ' : ''}
  {$doTools=(in_array($_GET['do'], ['tools','configure','changepasswd','changetag','import','export'], true)) ? ' ' : ''}
  {$doLogin=($_GET['do'] === 'login') ? ' ' : ''}

  <a href="{$titleLink}" class="navbar-brand">
    {$shaarlititle}
  </a>
  <ul class="navbar-nav ml-auto">
    {if="$is_logged_in || $openshaarli"}
      <li class="nav-item {if="$doAdd"} active {/if}">
        <a href="?do=addlink"
           class="nav-link"
           {if="$doAdd"} aria-current="page" {/if}
        >
          {'Add'|t}
        </a>
      </li>
    {/if}
    <li class="nav-item">
      <a href="#search" class="nav-link">{'Search'|t}</a>
    </li>
    {if="$is_logged_in"}
      <li class="nav-item {if="$doTools"} active {/if}">
        <a href="?do=tools"
           class="nav-link"
           {if="$doTools"} aria-current="true" {/if}
        >
          {'Tools'|t}
        </a>
      </li>
    {else}
      <li class="nav-item {if="$doLogin"} active {/if}">
        <a href="?do=login"
           class="nav-link"
           {if="$doLogin"} aria-current="page" {/if}
        >
          {'Login'|t}
        </a>
      </li>
    {/if}
    {if="count($plugins_header.buttons_toolbar)>0"}
      <li class="nav-item dropdown">
        <details>
          <summary class="nav-link dropdown-toggle">
            &hellip;
          </summary>
          <div class="dropdown-menu dropdown-menu-right show">
            {loop="$plugins_header.buttons_toolbar"}
              <a class="dropdown-item {$value.class}"
                 {loop="$value.attr"}
                   {$key}="{$value}"
                 {/loop}
              >
                {$value.html}
              </a>
            {/loop}
          </div>
        </details>
      </li>
    {/if}
  </ul>
</nav>

<div class="container-fluid">{ignore}<!-- opened here, closed in page.footer.html -->{/ignore}

  {if="!empty($newVersion) || !empty($versionError)"}
    {if="$newVersion"}
      <p class="alert alert-info" role="alert">
        <a href="https://github.com/shaarli/Shaarli/releases">
          Shaarli {$newVersion} {'is available'|t}
        </a>
      </p>
    {/if}
    {if="$versionError"}
      <p class="alert alert-danger" role="alert">
        {'Error'|t}: {$versionError}
      </p>
    {/if}
  {/if}

  {if="!empty($plugin_errors) && $is_logged_in"}
    <div id="shaarli-errors-alert">
      {loop="plugin_errors"}
        <p class="alert alert-danger" role="alert">
          {$value}
        </p>
      {/loop}
    </div>
  {/if}

  {if="!empty($global_warnings) && $is_logged_in"}
    <div id="shaarli-warnings-alert">
      {loop="global_warnings"}
        <p class="alert alert-warning" role="alert">
          {$value}
        </p>
      {/loop}
    </div>
  {/if}
