<!DOCTYPE html>
<html>
<head>
  {include="includes"}
</head>
<body class="text-light bg-dark">
{include="page.header"}

<div id="linklist">
  <div id="plugin_zone_start_linklist">
    {loop="$plugin_start_zone"}
      {$value}
    {/loop}
  </div>

  {if="count($links)==0"}
    <div class="alert alert-warning">
      <p class="mb-0">
        {'Nothing found.'|t}
      </p>
    </div>
  {elseif="!empty($search_term) or $search_tags !== '' or !empty($visibility) or $untaggedonly"}
    <div class="alert alert-dark">
      <p class="mb-0">
        {function="sprintf(t('%s result', '%s results', $result_count), $result_count)"}
        {if="!empty($search_term)"}
          {'for'|t} <em><strong>{$search_term}</strong></em>
        {/if}

        {if="!empty($search_tags)"}
          {$exploded_tags=explode(' ', $search_tags)}
          {'tagged'|t}:
          {loop="$exploded_tags"}
              <span class="badge badge-secondary">
                {$value}
                &nbsp;
                <a href="?removetag={function="urlencode($value)"}"
                   title="{'Remove tag'|t}"
                   class="text-reset"
                >
                  <span class="sr-only">{'Remove tag'|t}</span>
                  <span aria-hidden="true">&times;</span>
                </a>
              </span>
          {/loop}
        {/if}
        {if="!empty($visibility)"}
          {'with status'|t} {$visibility|t}
        {/if}
        {if="$untaggedonly"}
          {'without any tag'|t}
        {/if}
      </p>
    </div>
  {/if}

  <ol id="linklist-loop" class="list-unstyled">
    {ignore}Set translation here, for performance{/ignore}
      {$strPrivate=t('Private')}
      {$strAddTag=t('Add tag')}
      {$strEdit=t('Edit')}
      {$strPermalink=t('Permalink')}
    {ignore}End of translations{/ignore}

    {loop="links"}
      <li id="{$value.shorturl}"
          class="mb-3 border-bottom"
      >
        {if="$value.private"}
          <small class="badge badge-secondary badge-pill float-right">{$strPrivate}</small>
        {/if}

        <h2 class="h4 text-break">
          <a href="{$value.real_url}" title="{$value.real_url}">{$value.title}</a>
        </h2>
        <p>
          <a href="{$value.real_url}"
             title="{$value.title}"
             class="text-muted"
          >
            <code>{$value.url}</code>
          </a>
        </p>

        {if="$value.description"}
          <p class="text-break">
            {$value.description}
          </p>
        {/if}

        {if="$value.tags"}
          <p>
            {$tag_counter=count($value.taglist)}
            {loop="value.taglist"}
              <a href="?addtag={$value|urlencode}"
                 rel="tag"
                 title="{$strAddTag}"
                 class="badge badge-secondary text-dark"
              >{$value}</a>
              {if="$tag_counter - 1 != $counter"}&middot;{/if}
            {/loop}
            </p>
        {/if}

        <p class="text-muted d-flex">
          {$last_modified_date=$value.updated_timestamp ? format_date($value.updated) : format_date($value.created)}
          <a href="?{$value.shorturl}"
             title="{$last_modified_date}"
             rel="permalink"
             class="btn btn-link btn-sm"
          >
            &para;
            <span class="sr-only">{$strPermalink}</span>
          </a>
          {if="$is_logged_in"}
            <a href="?edit_link={$value.id}"
               class="btn btn-link btn-sm text-lowercase text-white-50"
            >
              {$strEdit}
            </a>
          {/if}
          <span class="ml-auto">
            <a href="https://web.archive.org/web/*/{$value.real_url}"
               class="btn btn-link btn-sm"
            >
              <svg viewBox="0 0 56 64" style="width:0.875rem;height:1rem">
                <path fill="currentColor" d="M0 7l28-7 27 6-1 2H2zm2 3h52v5H2zm0 46h52v4H2zm-2 5h56v3H0v-3m3-44h5v37H3V17m45 0h5v37h-5V17m-31 0h5v37h-5V17m17 0h5v37h-5V17" />
              </svg>
            </a>
            {if="isset($value.link_plugin)"}
              {loop="$value.link_plugin"}
                {$value}
              {/loop}
            {/if}
          </span>
        </p>
      </li>
    {/loop}
  </ol>
</div>

  <div id="plugin_zone_end_linklist">
    {loop="$plugin_end_zone"}
      {$value}
    {/loop}
  </div>

{if="!empty($linkcount)"}
  <p class="my-2 text-center">
    <strong>{$linkcount}</strong> {function="t('url', 'urls', $linkcount)"}
    {if="$privateLinkcount > 0"}
      &middot;
      <strong>{$privateLinkcount}</strong> {function="t('private url', 'private urls', $privateLinkcount)"}
    {/if}
  </p>
{/if}


{include="page.footer"}

</body>
</html>
